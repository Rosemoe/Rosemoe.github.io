<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Sora-editor - Get started | Rosemoe的小博客</title><meta name="author" content="Rosemoe"><meta name="copyright" content="Rosemoe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="PreThe project is fast-moving. This page may not be updated in time. The content of this page may be invalid for newest editor versions. Introductionsora-editor is a optimized editor library with a lo">
<meta property="og:type" content="article">
<meta property="og:title" content="Sora-editor - Get started">
<meta property="og:url" content="https://blog.rosemoe.cyou/2021/08/22/editor-get-started/index.html">
<meta property="og:site_name" content="Rosemoe的小博客">
<meta property="og:description" content="PreThe project is fast-moving. This page may not be updated in time. The content of this page may be invalid for newest editor versions. Introductionsora-editor is a optimized editor library with a lo">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.rosemoe.cyou/img/posts/editor-get-started/cover.jpg">
<meta property="article:published_time" content="2021-08-22T05:58:06.000Z">
<meta property="article:modified_time" content="2025-06-22T17:31:57.041Z">
<meta property="article:author" content="Rosemoe">
<meta property="article:tag" content="Android,Java,Kotlin,Algorithm">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.rosemoe.cyou/img/posts/editor-get-started/cover.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Sora-editor - Get started",
  "url": "https://blog.rosemoe.cyou/2021/08/22/editor-get-started/",
  "image": "https://blog.rosemoe.cyou/img/posts/editor-get-started/cover.jpg",
  "datePublished": "2021-08-22T05:58:06.000Z",
  "dateModified": "2025-06-22T17:31:57.041Z",
  "author": [
    {
      "@type": "Person",
      "name": "Rosemoe",
      "url": "https://blog.rosemoe.cyou"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://blog.rosemoe.cyou/2021/08/22/editor-get-started/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'https://fancyapps.com/fancybox/',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Sora-editor - Get started',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom_styles.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/head.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/posts/editor-get-started/cover.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Rosemoe的小博客</span></a><a class="nav-page-title" href="/"><span class="site-name">Sora-editor - Get started</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Sora-editor - Get started</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-22T05:58:06.000Z" title="发表于 2021-08-22 13:58:06">2021-08-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-06-22T17:31:57.041Z" title="更新于 2025-06-23 01:31:57">2025-06-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/sora-editor/">sora-editor</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="Pre"><a href="#Pre" class="headerlink" title="Pre"></a>Pre</h1><p>The project is fast-moving. This page may not be updated in time. The content of this page may be invalid for newest editor versions.</p>
<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p><a href="(https://search.maven.org/search?q=io.github.Rosemoe.sora-editor%20editor)"><img src="https://img.shields.io/maven-central/v/io.github.Rosemoe.sora-editor/editor.svg?label=Maven%20Central" alt="Maven Central"></a><br>sora-editor is a optimized editor library with a lot of features on Android.<br>It aims at making more people able to develop their own IDEs with less efforts. Also developing the editor is part of the interest of mine.<br>However its license is LGPL v2.1. Be careful about that.<br>As it is still developing and being tested, there may be some bugs and APIs can be easily changed at the stage.</p>
<h1 id="Get-Started"><a href="#Get-Started" class="headerlink" title="Get Started"></a>Get Started</h1><p>We use Android Gradle project for example.</p>
<h2 id="Check-your-app-environment"><a href="#Check-your-app-environment" class="headerlink" title="Check your app environment"></a>Check your app environment</h2><h3 id="Platforms"><a href="#Platforms" class="headerlink" title="Platforms"></a>Platforms</h3><p>There are lambdas(Java 8) and <code>var</code> usages(Java 11) in CodeEditor’s source code, which requires you to use build tools with higher versions. Otherwise, you may meet some problems on old Android platforms telling that some static methods are not found, typically <code>metafactory()</code> in <code>java.lang.invoke.LambdaMetafactory</code><br>Here are the editor’s compiling tool versions:</p>
<ul>
<li>Gradle 7.0.2</li>
<li>AGP(Android Gradle Plugin) 7.0.2</li>
<li>build-tools version 31.0.0</li>
</ul>
<h3 id="SDK-Version"><a href="#SDK-Version" class="headerlink" title="SDK Version"></a>SDK Version</h3><p>CodeEditor’s minSdkVersion is 21. We have removed code to adapt older Android versions to avoid much more work.<br>And targetSdkVersion of editor is 31.</p>
<h3 id="License"><a href="#License" class="headerlink" title="License"></a>License</h3><p>Make sure your app is consistent with our license LGPL v2.1</p>
<h2 id="Add-dependency"><a href="#Add-dependency" class="headerlink" title="Add dependency"></a>Add dependency</h2><p>You just need to add dependencies to your Android app’s <code>build.gradle</code> without adding other repos.<br>Adding the following lines to your app’s <code>build.gradle</code>, and <code>CodeEditor</code> widget can be used.</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    ... <span class="comment">// Other dependencies</span></span><br><span class="line">    <span class="comment">// Add editor, which contains the basic widget</span></span><br><span class="line">    implementation <span class="string">&#x27;io.github.Rosemoe.sora-editor:editor:&lt;version&gt;&#x27;</span></span><br><span class="line">    <span class="comment">// Add languages, if you need them as not everyone wants to implement one by himself</span></span><br><span class="line">    implementation <span class="string">&#x27;io.github.Rosemoe.sora-editor:language-java:&lt;version&gt;&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;io.github.Rosemoe.sora-editor:language-html:&lt;version&gt;&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;io.github.Rosemoe.sora-editor:language-python:&lt;version&gt;&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;io.github.Rosemoe.sora-editor:language-universal:&lt;version&gt;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Pay attention to the version of editor. Watch <a target="_blank" rel="noopener" href="https://github.com/Rosemoe/sora-editor/">our project</a> on GitHub to know about our latest <a target="_blank" rel="noopener" href="https://github.com/Rosemoe/sora-editor/releases">releases</a>.<br>Don’t forget to click <code>File</code>-&gt;<code>Sync Project with Gradle files</code> after adding.</p>
<h2 id="Add-widget-to-your-layout"><a href="#Add-widget-to-your-layout" class="headerlink" title="Add widget to your layout"></a>Add widget to your layout</h2><p>There is <strong>no</strong> custom xml attributes for editor now. You must control it by Java code.<br>Typically, you should add the editor like this:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">io.github.rosemoe.sora.widget.CodeEditor</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/code_editor&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>Note:</strong> The editor does <strong>not</strong> support measuring its content’s size, so it will just fill the available space when you use <code>wrap_content</code>. So use either <code>match_parent</code> or an exact size for the editor in your layout files.</p>
<h2 id="Adjust-editor-language-by-code"><a href="#Adjust-editor-language-by-code" class="headerlink" title="Adjust editor language by code"></a>Adjust editor language by code</h2><p>Though the view is added, you will find that all texts are in black color without highlighting. That’s because you must specify a language for it in code. Otherwise, CodeEditor just uses the <code>io.github.rosemoe.editor.lang.EmptyLanguage</code>.<br>Take language-java for example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.github.rosemoe.sora.widget.CodeEditor;</span><br><span class="line"><span class="keyword">import</span> io.github.rosemoe.sora.lang.java.JavaLanguage;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="type">CodeEditor</span> <span class="variable">editor</span> <span class="operator">=</span> (CodeEditor) findViewById(R.id.code_editor);</span><br><span class="line">editor.setEditorLanguage(<span class="keyword">new</span> <span class="title class_">JavaLanguage</span>());</span><br></pre></td></tr></table></figure>
<p>And editor will update its text colors soon.<br><strong>Note:</strong> You should always create a new language instance when using <code>CodeEditor#setEditorLanguage(EditorLanguage)</code>, because the <code>Language</code> is intended to work for <strong>exactly one editor</strong>. Otherwise, the result of the Language instance can be messed.<br><strong>Tip:</strong> A language’s constructor is not necessary to have no parameters.<br>And set&#x2F;get text…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">editor.setText(<span class="string">&quot;public class Main &#123;\n    \n&#125;&quot;</span>);</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="type">Content</span> <span class="variable">text</span> <span class="operator">=</span> editor.getText();</span><br><span class="line"><span class="comment">// The result content should not be modified if you do not know what it means!</span></span><br><span class="line"><span class="comment">// Any change to the result can cause the composing text to be corrupted and probably a future crash of the editor</span></span><br></pre></td></tr></table></figure>
<h2 id="Some-related-problems"><a href="#Some-related-problems" class="headerlink" title="Some related problems"></a>Some related problems</h2><p>Here are some useful problems you may be interested in.</p>
<h3 id="How-to-change-text-colors"><a href="#How-to-change-text-colors" class="headerlink" title="How to change text colors"></a>How to change text colors</h3><p>Editor’s colors are maintained by IDs.<br>There are some built-in IDs in <code>EditorColorScheme</code>. You may add new colors for your language to use by calling <code>EditorColorScheme#setColor(int,int)</code><br>Get <code>EditorColorScheme</code> object used by CodeEditor through <code>CodeEditor#getColorScheme()</code> to update any color. However it is not recommed.<br>For a full update of editor’s theme, use <code>CodeEditor#setColorScheme(EditorColorScheme)</code>.<br>You can extend <code>EditorColorScheme</code> to define your own theme.<br>But note that you should always pass a new instance of <code>EditorColorScheme</code> to this method. As <code>EditorColorScheme</code> is designed to serve for only one editor. Otherwise, an <code>IllegalStateException</code> may be thrown.</p>
<h3 id="How-to-insert-text-in-editor"><a href="#How-to-insert-text-in-editor" class="headerlink" title="How to insert text in editor"></a>How to insert text in editor</h3><p>Well. There is an API class for that. Though it is originally intended for symbol input view, you can insert any text by that. Turn to <a target="_blank" rel="noopener" href="https://github.com/Rosemoe/sora-editor/blob/main/app/src/main/java/io/github/rosemoe/sora/widget/SymbolInputView.java">SymbolInputView</a> in sample app for instance.<br>Turn to <code>io.github.rosemoe.sora.widget.SymbolChannel</code> for more information</p>
<h3 id="How-to-be-informed-when-text-changes"><a href="#How-to-be-informed-when-text-changes" class="headerlink" title="How to be informed when text changes"></a>How to be informed when text changes</h3><p>Use <code>CodeEditor#setEventListener(EditorEventListener)</code></p>
<h3 id="Ligatures"><a href="#Ligatures" class="headerlink" title="Ligatures"></a>Ligatures</h3><p>In some fonts, characters are display differently when they are together, such as ‘&#x2F;‘ and ‘&#x2F;&#x2F;‘. The space between them can be shrinked and causes the editor to display them wrongly.<br>This is caused by font ligatures. Ligatures of all types are disabled by the editor by default now.</p>
<h3 id="Discuss"><a href="#Discuss" class="headerlink" title="Discuss"></a>Discuss</h3><p><a target="_blank" rel="noopener" href="https://t.me/rosemoe_code_editor"><img src="https://img.shields.io/badge/Join-Telegram-blue" alt="Telegram"></a><br><a target="_blank" rel="noopener" href="https://jq.qq.com/?_wv=1027&k=n68uxQws"><img src="https://img.shields.io/badge/Join-QQ_Group-ff69b4" alt="QQ"></a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.rosemoe.cyou">Rosemoe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.rosemoe.cyou/2021/08/22/editor-get-started/">https://blog.rosemoe.cyou/2021/08/22/editor-get-started/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.rosemoe.cyou" target="_blank">Rosemoe的小博客</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/posts/editor-get-started/cover.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2021/10/02/android-render-node-using/" title="使用Android RenderNode加速绘制"><img class="cover" src="/img/posts/android-render-node-using/cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">使用Android RenderNode加速绘制</div></div><div class="info-2"><div class="info-item-1">写在前面的废话研究RenderNode的起因…作为一个代码编辑器的开发者，我十分关注我写的View的绘制速度。于是国庆节放假，心血来潮测试自己编辑器和EditText绘制的性能。发现一段代码，在两个View中显示出来几乎没什么区别，但是TextView的绘制比咱快多了，这是为什么呢？我尝试一段一段注释自己的除了文本以外元素的绘制代码。从屏蔽代码区划线，到屏蔽空白字符的绘制，最后甚至把代码高亮都换成了普普通通的文本绘制，但是就是比不上EditText。笔者一下子就十分纳闷了，于是开始摸TextView的绘制部分。 摸索TextView源码…下面以Andoird Q的源码为例。打开onDraw()方法翻了一会，看到了调用Layout绘制的代码，不过伴随着的还有mEditor: 123456Path highlight = getUpdatedHighlightPath();if (mEditor != null) &#123;    mEditor.onDraw(canvas, layout, highlight, mHighlightPaint, cursorOffsetVerti...</div></div></div></a><a class="pagination-related" href="/2020/10/30/image-to-qq-painting/" title="👴玩爆QQ涂鸦"><img class="cover" src="/img/posts/image-to-qq-painting/cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">👴玩爆QQ涂鸦</div></div><div class="info-2"><div class="info-item-1">作业原因最近逛b站时发现一个宝藏up主：鉴无虚发QQ涂鸦（uid402778937），他利用QQ不久前更新的涂鸦功能进行创作，绘制了许多有趣的涂鸦，还让粉丝群的成员发送一张图 片，他照着画出来。这让我很羡慕，可是我美术不行，加之用手机画画实在不是一键容易的事，手指太粗，屏幕太小，据up自述，完成一件创造大约需要30min，这让我这个急性子更难受。不过我会一点编程，于是想尝试写一个简单的程序来实现此功能。 过程准备自己使用的手机用的安卓系统，安卓在安卓7.0（Nougat）为辅助功能（AccessibilityService）添加了 1Boolean dispatchGesture(gesture: GestureDescription, callback: AccessibilityService.GestureResultCallback?, handler: Handler?) 来在触摸屏上执行一个手势。我们可以利用这个方法来实现涂鸦的功能。不过原生安卓开发很麻烦，受时间限制，采取跨平台的Auto.js来编写js脚本实现。我把步骤分为两步1读取图片并出来成类似简笔画的效果2在...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/head.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Rosemoe</div><div class="author-info-description">A lazy Android developer</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Rosemoe"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Rosemoe" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="javascript:copyEmail();" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到Rosemoe的小博客~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Pre"><span class="toc-number">1.</span> <span class="toc-text">Pre</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Introduction"><span class="toc-number">2.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Get-Started"><span class="toc-number">3.</span> <span class="toc-text">Get Started</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Check-your-app-environment"><span class="toc-number">3.1.</span> <span class="toc-text">Check your app environment</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Platforms"><span class="toc-number">3.1.1.</span> <span class="toc-text">Platforms</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SDK-Version"><span class="toc-number">3.1.2.</span> <span class="toc-text">SDK Version</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#License"><span class="toc-number">3.1.3.</span> <span class="toc-text">License</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Add-dependency"><span class="toc-number">3.2.</span> <span class="toc-text">Add dependency</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Add-widget-to-your-layout"><span class="toc-number">3.3.</span> <span class="toc-text">Add widget to your layout</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Adjust-editor-language-by-code"><span class="toc-number">3.4.</span> <span class="toc-text">Adjust editor language by code</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Some-related-problems"><span class="toc-number">3.5.</span> <span class="toc-text">Some related problems</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-change-text-colors"><span class="toc-number">3.5.1.</span> <span class="toc-text">How to change text colors</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-insert-text-in-editor"><span class="toc-number">3.5.2.</span> <span class="toc-text">How to insert text in editor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-be-informed-when-text-changes"><span class="toc-number">3.5.3.</span> <span class="toc-text">How to be informed when text changes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ligatures"><span class="toc-number">3.5.4.</span> <span class="toc-text">Ligatures</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Discuss"><span class="toc-number">3.5.5.</span> <span class="toc-text">Discuss</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/10/18/csu-programming-test-2025-2/" title="中南大学2025年第二批预推免机试题解"><img src="/img/posts/csu-programming-test-2025-2/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="中南大学2025年第二批预推免机试题解"/></a><div class="content"><a class="title" href="/2025/10/18/csu-programming-test-2025-2/" title="中南大学2025年第二批预推免机试题解">中南大学2025年第二批预推免机试题解</a><time datetime="2025-10-18T02:28:34.000Z" title="发表于 2025-10-18 10:28:34">2025-10-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/05/replay-on-a-network-problem-in-contest/" title="校赛防火墙配置导致比赛机器断网问题复盘"><img src="/img/posts/replay-on-a-network-problem-in-contest/cover.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="校赛防火墙配置导致比赛机器断网问题复盘"/></a><div class="content"><a class="title" href="/2025/07/05/replay-on-a-network-problem-in-contest/" title="校赛防火墙配置导致比赛机器断网问题复盘">校赛防火墙配置导致比赛机器断网问题复盘</a><time datetime="2025-07-05T09:44:10.000Z" title="发表于 2025-07-05 17:44:10">2025-07-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/08/xcpc-campus-contest-technically/" title="XCPC 校赛技术筹备指南"><img src="/img/posts/xcpc-campus-contest-technically/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="XCPC 校赛技术筹备指南"/></a><div class="content"><a class="title" href="/2025/06/08/xcpc-campus-contest-technically/" title="XCPC 校赛技术筹备指南">XCPC 校赛技术筹备指南</a><time datetime="2025-06-08T02:36:46.000Z" title="发表于 2025-06-08 10:36:46">2025-06-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/09/codeforces-hacks-on-unordered-map/" title="Codeforces比赛中的unordered_map Hacks"><img src="/img/posts/codeforces-hacks-on-unordered-map/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Codeforces比赛中的unordered_map Hacks"/></a><div class="content"><a class="title" href="/2023/08/09/codeforces-hacks-on-unordered-map/" title="Codeforces比赛中的unordered_map Hacks">Codeforces比赛中的unordered_map Hacks</a><time datetime="2023-08-08T16:45:04.000Z" title="发表于 2023-08-09 00:45:04">2023-08-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/26/codeforces-888/" title="Codeforces Round 888 (Div.3) A-G 题解"><img src="/img/posts/codeforces-888/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Codeforces Round 888 (Div.3) A-G 题解"/></a><div class="content"><a class="title" href="/2023/07/26/codeforces-888/" title="Codeforces Round 888 (Div.3) A-G 题解">Codeforces Round 888 (Div.3) A-G 题解</a><time datetime="2023-07-26T07:05:22.000Z" title="发表于 2023-07-26 15:05:22">2023-07-26</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2020 - 2025 By Rosemoe</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 6.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div><div class="footer_custom_text">にゃん~</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.1"></script><script src="/js/main.js?v=5.5.1"></script><script src="/"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        loader: {
          load: [
            // Four font extension packages (optional)
            //- '[tex]/bbm',
            //- '[tex]/bboldx',
            //- '[tex]/dsfont',
            '[tex]/mhchem'
          ],
          paths: {
            'mathjax-newcm': '[mathjax]/../@mathjax/mathjax-newcm-font',

            //- // Four font extension packages (optional)
            //- 'mathjax-bbm-extension': '[mathjax]/../@mathjax/mathjax-bbm-font-extension',
            //- 'mathjax-bboldx-extension': '[mathjax]/../@mathjax/mathjax-bboldx-font-extension',
            //- 'mathjax-dsfont-extension': '[mathjax]/../@mathjax/mathjax-dsfont-font-extension',
            'mathjax-mhchem-extension': '[mathjax]/../@mathjax/mathjax-mhchem-font-extension'
          }
        },
        output: {
          font: 'mathjax-newcm',
        },
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
          packages: {
            '[+]': [
              'mhchem'
            ]
          }
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          menuOptions: {
            settings: {
              enrich: false  // Turn off Braille and voice narration text automatic generation
            }
          },
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }

      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax@4.0.0/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script></div><script async src="/js/sideloaded.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/click-show-text.min.js" data-mobile="true" data-text="にゃん~,喵~" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>